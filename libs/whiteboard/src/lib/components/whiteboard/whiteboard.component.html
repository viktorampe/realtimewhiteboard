<div
  class="whiteboard"
  (filesDroppedEvent)="onFilesDropped($event)"
  campusImageDrag
  (click)="onClickWhiteboard()"
>
  <campus-whiteboard-toolbar
    *ngIf="selectedCards.length"
    (deleteCards)="bulkDeleteClicked()"
    (changeSelectedColor)="changeSelectedCardsColor($event)"
  ></campus-whiteboard-toolbar>
  <div class="whiteboard__header">
    <h2
      *ngIf="!isTitleInputSelected"
      class="whiteboard__header__title"
      (click)="showTitleInput()"
      >{{ title }}</h2
    >
    <input
      type="text"
      #titleInput
      [(ngModel)]="title"
      (keyup.enter)="hideTitleInput()"
      (focusout)="hideTitleInput()"
      *ngIf="isTitleInputSelected"
    />
  </div>
  <div class="whiteboard__workspace" (dblclick)="onDblClick($event)" #workspace>
    <div
      class="whiteboard__workspace__container"
      *ngFor="let card of cards"
      cdkDrag
      [cdkDragFreeDragPosition]="{ x: card.left, y: card.top }"
      [cdkDragDisabled]="card.mode === Mode.ZoomMode"
      cdkDragBoundary=".whiteboard__workspace"
      [class.zoom]="card.mode === Mode.ZoomMode"
    >
      <campus-color-list
        class="whiteboard__color-list"
        (selectedColor)="changeColorForCard(card, $event)"
        *ngIf="card.mode === Mode.EditMode || card.mode === Mode.SelectedMode"
      ></campus-color-list>
      <campus-card-toolbar
        *ngIf="
          card.mode === Mode.EditMode ||
          card.mode === Mode.SelectedMode ||
          card.mode === Mode.MultiSelectSelectedMode ||
          card.mode === Mode.MultiSelectMode
        "
        class="whiteboard__card_toolbar"
        [mode]="card.mode"
        (clickDeleteIcon)="onDeleteCard(card)"
        (clickEditIcon)="cardEditIconClicked(card)"
        (clickFlipIcon)="cardFlipIconClicked(card)"
        (clickConfirmIcon)="cardConfirmIconClicked(card)"
        (clickMultiSelectIcon)="onSelectCard(card)"
        (clickMultiSelectSelectedIcon)="onDeselectCard(card)"
      ></campus-card-toolbar>
      <campus-card
        class="whiteboard__card"
        [(description)]="card.description"
        [(color)]="card.color"
        [(image)]="card.image"
        [(mode)]="card.mode"
        [(viewModeImage)]="card.viewModeImage"
        (cardTapped)="onCardTapped(card)"
        (cardPressed)="onCardPressed(card)"
        (removeImage)="removeImageFromCard(card)"
        (updateImage)="openFilePicker(filePicker)"
        (cdkDragEnded)="onDragEnded($event, card)"
      ></campus-card>
      <input
        (change)="onFilePickerImageSelected($event, card)"
        type="file"
        #filePicker
        multiple="false"
        style="display: none;"
      />
    </div>
  </div>
  <button
    mat-fab
    color="primary"
    class="whiteboard__addbutton"
    (click)="btnPlusClicked()"
  >
    <mat-icon style="color: #FFFFFF;" [svgIcon]="'plus'"></mat-icon>
  </button>
  <button
    mat-fab
    color="primary"
    class="whiteboard__savebutton"
    (click)="saveWhiteboard()"
  >
    <mat-icon style="color: #FFFFFF;" [svgIcon]="'check'"></mat-icon>
  </button>

  <campus-shelf
    (cardDraggedOutsideContainer)="cardDraggedPosition($event)"
    [class.minimizedShelf]="isShelfMinimized"
    [cards]="this.shelvedCards"
    [(isMinimized)]="isShelfMinimized"
  ></campus-shelf>
</div>
