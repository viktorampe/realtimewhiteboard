<ng-container
  *ngFor="let option of filteredFilterCriterium.values; let i = index"
>
  <!-- titles -->
  <mat-checkbox
    mat-list-item
    class="checkbox-filter__title"
    [class.checkbox-filter__item--hidden]="
      maxVisibleItems && i >= maxVisibleItems && !showMoreItems
    "
    [value]="option"
    [checked]="option.selected"
    [indeterminate]="indeterminateStatus[option.data.id]"
    (change)="onChange($event)"
    >{{ getDisplayValue(option)
    }}<span *ngIf="option.prediction" class="checkbox-filter__item__prediction">
      {{ ' (' + option.prediction + ')' }}</span
    ></mat-checkbox
  >

  <!-- children -->
  <campus-checkbox-filter
    class="checkbox-filter__items"
    [class.checkbox-filter__item--hidden]="
      maxVisibleItems && i >= maxVisibleItems && !showMoreItems
    "
    *ngIf="option.child"
    [criterium]="option.child"
    [maxVisibleItems]="maxVisibleItems"
    [parentValueRef]="option"
    (selectionChanged)="onChildChange($event)"
  >
  </campus-checkbox-filter>
</ng-container>
<!-- show more titles ? -->
<a
  *ngIf="
    maxVisibleItems && maxVisibleItems < filteredFilterCriterium.values.length
  "
  (click)="toggleShowMore()"
  class="checkbox-filter__footer"
>
  <mat-icon
    [svgIcon]="'arrow-back'"
    [class.rotate--up]="showMoreItems"
    [class.rotate--down]="!showMoreItems"
  ></mat-icon>
  {{ !showMoreItems ? 'toon meer...' : 'toon minder...' }}
</a>
