<ng-container
  *ngFor="let option of filteredFilterCriterium.values; let i = index"
>
  <!-- titles -->
  <mat-checkbox
    mat-list-item
    class="checkbox-filter__title"
    [class.checkbox-filter__item--hidden]="
      i >= maxVisibleItems && !showMoreItems
    "
    [value]="option"
    [checked]="option.selected"
    [disabled]="!option.prediction"
    (change)="onChange($event)"
    >{{ getDisplayValue(option) }}</mat-checkbox
  >

  <!-- children -->
  <campus-checkbox-filter
    class="checkbox-filter__items"
    [class.checkbox-filter__item--hidden]="
      i >= maxVisibleItems && !showMoreItems
    "
    *ngIf="option.child"
    [criterium]="option.child"
    [maxVisibleItems]="maxVisibleItems"
    [parentValueRef]="option"
    [notificationFromParent]="notifyChildren$ | async"
    (selectionChanged)="onChildChange($event)"
  >
  </campus-checkbox-filter>
</ng-container>

<!-- show more titles ? -->
<a
  *ngIf="
    maxVisibleItems && maxVisibleItems < filteredFilterCriterium.values.length
  "
  (click)="toggleShowMore()"
  >{{ !showMoreItems ? 'toon meer...' : 'toon minder...' }}</a
>
