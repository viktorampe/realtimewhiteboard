<ng-container
  *ngFor="let option of filteredFilterCriterium.values; let i = index"
>
  <!-- titles -->
  <mat-checkbox
    mat-list-item
    #title
    class="checkbox-selection-list-filter__title"
    [class.checkbox-selection-list-filter__item--hidden]="
      i >= maxVisibleItems && !showMoreItems
    "
    [value]="option"
    [checked]="option.selected"
    (change)="onChange($event)"
    >{{ option.data[criterium.displayProperty] }} ({{
      option.prediction
    }})</mat-checkbox
  >

  <!-- children -->
  <campus-checkbox-selection-list-filter
    class="checkbox-selection-list-filter__items"
    [class.checkbox-selection-list-filter__item--hidden]="
      i >= maxVisibleItems && !showMoreItems
    "
    *ngIf="option.child"
    [criterium]="option.child"
    [maxVisibleItems]="maxVisibleItems"
    [parentValueRef]="option"
    [notificationFromParent$]="notifyChildren$"
    (selectionChanged)="onChildChange($event)"
  >
  </campus-checkbox-selection-list-filter>
</ng-container>

<!-- show more titles ? -->
<ng-container
  *ngIf="
    maxVisibleItems && maxVisibleItems < filteredFilterCriterium.values.length
  "
>
  <ng-container *ngIf="!showMoreItems; else: showLess">
    <a (click)="showMore(true)">toon meer...</a></ng-container
  >

  <ng-template #showLess>
    <a (click)="showMore(false)">toon minder...</a>
  </ng-template>
</ng-container>
