<div class="manage-kabas-tasks-overview__container">
  <mat-tab-group
    [selectedIndex]="currentTab$ | async"
    (selectedIndexChange)="onSelectedTabIndexChanged($event)"
  >
    <mat-tab label="Digitale taken">
      <campus-filter-text-input
        #digitalTasksTextFilter
        [source]="tasksWithAssignments$ | async"
      ></campus-filter-text-input>
      <mat-selection-list #digital>
        <mat-list-item
          (click)="clickAddDigitalTask()"
          class="manage-kabas-tasks-overview__list__primary-action"
        >
          <mat-icon svgIcon="add"></mat-icon>
          nieuwe taak
        </mat-list-item>

        <ng-template #allDigitalTasks>
          <mat-list-option
            *ngFor="let task of (tasksWithAssignments$ | async)"
            checkboxPosition="before"
          >
            {{ task.name }}
          </mat-list-option>
        </ng-template>
        <ng-container
          *ngIf="
            (digitalTasksFilterTextInput.result$ | async) as filteredTasks;
            else allDigitalTasks
          "
        >
          <mat-list-option
            *ngFor="let task of filteredTasks"
            checkboxPosition="before"
          >
            {{ task.name }}
          </mat-list-option>
        </ng-container>
      </mat-selection-list>
    </mat-tab>

    <mat-tab label="Papieren taken">
      <campus-filter-text-input
        #paperTasksTextFilter
        [source]="paperTasksWithAssignments$ | async"
      ></campus-filter-text-input>
      <mat-selection-list #paper>
        <mat-list-item
          (click)="clickAddPaperTask()"
          class="manage-kabas-tasks-overview__list__primary-action"
        >
          <mat-icon svgIcon="add"></mat-icon>
          nieuwe taak
        </mat-list-item>

        <ng-template #allPaperTasks>
          <mat-list-option
            *ngFor="let task of (paperTasksWithAssignments$ | async)"
            checkboxPosition="before"
          >
            {{ task.name }}
          </mat-list-option>
        </ng-template>

        <ng-container
          *ngIf="
            (paperTasksFilterTextInput.result$ | async) as filteredTasks;
            else allPaperTasks
          "
        >
          <mat-list-option
            *ngFor="let task of filteredTasks"
            checkboxPosition="before"
          >
            {{ task.name }}
          </mat-list-option>
        </ng-container>
      </mat-selection-list>
    </mat-tab>
  </mat-tab-group>
</div>
