<campus-backdrop title="Mijn taken" [static]="true">
  <backdrop-reveal-action>
    <mat-icon svgIcon="tasks"></mat-icon>
  </backdrop-reveal-action>
  <front-layer-content class="student-task-overview">
    <campus-section
      [mode]="sectionModes.CONTAINER"
      class="student-task-overview__main"
    >
      <section-title>
        {{ sectionTitle$ | async }}
        <ng-container *ngIf="inEmptyState$ | async">
          <campus-button
            bordered
            *ngIf="showFinishedTasks$ | async; else showActiveTasks"
            (click)="showFinishedTasks$.next(false)"
            >Actieve taken</campus-button
          >
        </ng-container>
        <ng-template #showActiveTasks>
          <campus-button bordered (click)="showFinishedTasks$.next(true)"
            >Afgewerkte taken</campus-button
          >
        </ng-template>
      </section-title>
      <section-content>
        <campus-empty-state
          *ngIf="emptyStateData$ | async as emptyStateData; else filledState"
          [title]="emptyStateData.title"
          [description]="emptyStateData.description"
          [ctaLabel]="emptyStateData.ctaLabel"
          [svgIcon]="emptyStateData.svgIcon"
          (clickCta)="emptyStateClick()"
        ></campus-empty-state>
        <ng-template #filledState>
          <mat-list *ngFor="let section of taskListSections$ | async">
            <h1 matSubheader [id]="section.learningAreaId">{{
              section.label
            }}</h1>
            <mat-list-item *ngFor="let studentTask of section.items">
              <!-- TODO: use ListItemContentComponent -->
              {{ studentTask.name }}
              {{ studentTask.description }}
              <campus-button inline>openen</campus-button>
            </mat-list-item>
            <mat-list-item></mat-list-item>
          </mat-list>
        </ng-template>
      </section-content>
    </campus-section>
    <campus-section
      *ngIf="!(inEmptyState$ | async)"
      [mode]="sectionModes.CONTAINER"
      class="student-task-overview__aside"
    >
      <section-content>
        <campus-section [mode]="sectionModes.STATIC">
          <section-content>
            <div>
              <campus-button
                inline
                *ngIf="showFinishedTasks$ | async; else actionForActiveTasks"
                (click)="setShowFinishedTasks(false)"
                >Toon actieve taken</campus-button
              >
            </div>
            <ng-template #actionForActiveTasks>
              <campus-button inline (click)="setShowFinishedTasks(true)"
                >Toon afgewerkte taken</campus-button
              >
            </ng-template>

            <div>
              <campus-button
                inline
                *ngIf="
                  isGroupedByDate$ | async;
                  else actionForGroupedByLearningArea
                "
                (click)="isGroupedByDate$.next(false)"
                >Groepeer per vak</campus-button
              >
            </div>
            <ng-template #actionForGroupedByLearningArea>
              <campus-button inline (click)="isGroupedByDate$.next(true)"
                >Sorteer op datum</campus-button
              >
            </ng-template>
            <hr />
            <div><campus-button inline>Wiskunde (2 taken)</campus-button></div>
            <div><campus-button inline>Taal (5 taken)</campus-button></div>
          </section-content>
        </campus-section>
      </section-content>
    </campus-section>
  </front-layer-content>
</campus-backdrop>
