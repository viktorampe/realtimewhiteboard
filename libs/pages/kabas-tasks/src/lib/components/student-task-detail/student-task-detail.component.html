<campus-backdrop *ngIf="task$ | async as task" [title]="task.name" static>
  <front-layer-content>
    <div class="student-task-detail__content">
      <ng-container
        *ngIf="requiredTaskContents$ | async as requiredTaskContents"
      >
        <campus-section
          [mode]="sectionModes.CONTAINER"
          *ngIf="requiredTaskContents.length"
          data-cy="required-task-container"
        >
          <section-title>Moetjes in deze taak</section-title>

          <section-actions>
            <campus-progress
              data-cy="task-progress"
              *ngIf="taskProgress$ | async as progress"
              [total]="progress.total"
              [count]="progress.finished"
              [showPercentage]="true"
              [diameter]="48"
              ><mat-icon completedProgressIcon svgIcon="check"></mat-icon>
            </campus-progress>
          </section-actions>

          <section-content>
            <mat-list>
              <mat-list-item
                *ngFor="let requiredTaskContent of requiredTaskContents"
                data-cy="required-task-content"
              >
                <campus-student-task-content-list-item
                  [fileIcon]="requiredTaskContent.icon"
                  [title]="requiredTaskContent.name"
                  [description]="requiredTaskContent.description"
                  [status]="requiredTaskContent.status"
                  [lastUpdated]="requiredTaskContent.lastUpdated"
                  [score]="requiredTaskContent.score"
                  [actions]="requiredTaskContent.actions"
                  [isFinished]="task.isFinished"
                ></campus-student-task-content-list-item>
              </mat-list-item>
            </mat-list>
          </section-content>
        </campus-section>
      </ng-container>

      <ng-container
        *ngIf="optionalTaskContents$ | async as optionalTaskContents"
      >
        <campus-section
          [mode]="sectionModes.CONTAINER"
          *ngIf="optionalTaskContents.length"
          data-cy="optional-task-container"
        >
          <section-title>Magjes in deze taak</section-title>

          <section-content>
            <mat-list>
              <mat-list-item
                *ngFor="let optionalTaskContent of optionalTaskContents"
                data-cy="optional-task-content"
              >
                <campus-student-task-content-list-item
                  [fileIcon]="optionalTaskContent.icon"
                  [title]="optionalTaskContent.name"
                  [description]="optionalTaskContent.description"
                  [status]="optionalTaskContent.status"
                  [lastUpdated]="optionalTaskContent.lastUpdated"
                  [score]="optionalTaskContent.score"
                  [actions]="optionalTaskContent.actions"
                  [isFinished]="task.isFinished"
                ></campus-student-task-content-list-item>
              </mat-list-item>
            </mat-list>
          </section-content>
        </campus-section>
      </ng-container>
    </div>

    <campus-section
      [mode]="sectionModes.CONTAINER"
      class="student-task-detail__side"
    >
      <section-title>Over deze taak</section-title>

      <section-content>
        Over deze taak inhoud.
      </section-content>
    </campus-section>
  </front-layer-content>
</campus-backdrop>
