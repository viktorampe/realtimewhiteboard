<div>
  <!-- todo alert component ? -->
  <div *ngIf="message" class="page-settings-credentials__box">
    {{ message }}
  </div>

  <div class="page-settings-credentials__box">
    <campus-info-panel [titleText]="'Nieuwe koppeling maken'" [icon]="'link'">
    </campus-info-panel>
    <div class="page-settings-credentials__box__content">
      <p>Maak een koppeling met:</p>
      <div class="page-settings-credentials__box__content__ssolinks">
        <campus-button
          *ngFor="let ssolink of (ssoLinks$ | async)"
          [iconClass]="ssolink.logoIcon"
          (click)="addCredential(ssolink)"
          >{{ ssolink.name }}</campus-button
        >
      </div>
    </div>
  </div>

  <div class="page-settings-credentials__box">
    <campus-info-panel [titleText]="'Mijn koppelingen'" [icon]="'settings-cog'">
    </campus-info-panel>
    <div class="page-settings-credentials__box__content">
      <div *ngFor="let credential of (credentials$ | async)">
        <campus-person-summary
          *ngIf="credential.profile"
          [person]="getPersonForBadge(credential)"
          [connectionTypeIcon]="credential.providerLogo"
        >
          <div description>
            <p>
              <span
                *ngIf="
                  credential.profile.emails && credential.profile.emails[0]
                "
              >
                - <mat-icon icon [svgIcon]="'mail'"></mat-icon>
                <a href="{{mailTo(credential)}}" target="_blank">{{
                  credential.profile.emails[0].value + '-'
                }}</a>
              </span>
              Laatste update: {{ credential.modified | humanDateTime }}
            </p>
          </div>
          <campus-button campusRoundedCorners (click)="changeAvatar(credential)"
            >Gebruik profielfoto</campus-button
          >
          <campus-button
            campusRoundedCorners
            (click)="decoupleCredential(credential)"
            >Loskoppelen</campus-button
          >
        </campus-person-summary>
      </div>
    </div>
  </div>
</div>
