<div>
  <!-- todo alert component ? -->
  <div *ngIf="message" class="page-settings-credentials__box">
    {{ message }}
  </div>

  <div class="page-settings-credentials__box">
    <div class="page-settings-credentials__box__header">
      <campus-page-header
        [title]="'NIEUWE KOPPELING MAKEN'"
        [iconClass]="'koppeling'"
      >
      </campus-page-header>
    </div>
    <p>Maak een koppeling met:</p>
    <div class="page-settings-credentials__box__ssolinks">
      <div *ngFor="let ssolink of (ssoLinks$ | async)">
        <campus-button
          *ngIf="ssolink"
          iconClass="'ssolink.logoSrc'"
          (click)="addCredential(ssolink)"
          >{{ ssolink.name }}</campus-button
        >
      </div>
    </div>
  </div>

  <div class="page-settings-credentials__box">
    <div class="page-settings-credentials__box__header">
      <campus-page-header [title]="'MIJN KOPPELING'" [iconClass]="'koppeling'">
      </campus-page-header>
    </div>
    <div *ngFor="let credential of (crednetials$ | async)">
      <campus-person-summary
        [imageUrl]="credential.profile.avatar"
        [name]="getUserNameToDisplayByCredential(credential)"
        [connectionTypeIcon]="getClass(credential.provider)"
      >
        <div description>
          <p>
            <span>
              <mat-icon icon [svgIcon]="link"></mat-icon>
              <a href="{{getPlatformLink(credential)}}" target="_blank">{{
                getPlatformText(credential)
              }}</a>
            </span>
            <span *ngIf="credential.profile.emails[0]">
              - <mat-icon icon [svgIcon]="mail"></mat-icon>
              <a href="{{mailTo(credential)}}" target="_blank">{{
                credential.profile.emails[0].value
              }}</a>
            </span>
            - Laatste update: {{ getDate(credential.modified) }}
            {{ getTime(credential.modified) }}
          </p>
        </div>
        <campus-button campusRoundedCorners (click)="changeAvatar(credential)"
          >Gebruik profielfoto</campus-button
        >
        <campus-button
          campusRoundedCorners
          (click)="decoupleCredential(credential)"
          >Loskoppelen</campus-button
        >
      </campus-person-summary>
    </div>
  </div>
</div>
