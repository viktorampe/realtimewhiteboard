<campus-page-bar>
  <campus-filter-text-input
    theme="dark"
    [source]="sharedInfo$ | async"
    class="pages__toolbar__filter"
  ></campus-filter-text-input>
  <div class="divider"></div>
  <campus-button
    [iconClass]="'list-view'"
    (click)="clickChangeListFormat(listFormat.LINE)"
    [class.ui-button--active]="(listFormat$ | async) === listFormat.LINE"
  ></campus-button>
  <campus-button
    [iconClass]="'grid-view'"
    (click)="clickChangeListFormat(listFormat.GRID)"
    [class.ui-button--active]="(listFormat$ | async) === listFormat.GRID"
  ></campus-button>
</campus-page-bar>

<div
  class="campus-page pages-bundles__container"
  *ngIf="sharedInfo$ | async as sharedInfo"
>
  <campus-page-header
    [title]="'Mijn bundels'"
    [subtitle]="'leergebieden'"
    [iconClass]="'lesmateriaal'"
  ></campus-page-header>

  <ng-template #noSharedInfo
    >Er zijn momenteel geen bundels voor jou klaargezet.</ng-template
  >
  <ng-container *ngIf="sharedInfo.learningAreas.length > 0; else noSharedInfo">
    <ng-container
      *ngIf="filterTextInput.result$ | async as filteredSharedLearningAreaInfo"
    >
      <div
        class="pages-bundles__container__learning-areas-count"
        data-cy="learningArea-count"
      >
        {{ filteredSharedLearningAreaInfo.length }} van
        <u
          class="pages-bundles__container__learning-areas-count__total"
          (click)="filterTextInput.clear()"
          >{{ sharedInfo.learningAreas.length }}</u
        >
        weergegeven
      </div>
      <div class="pages-bundles__container__learning-areas">
        <campus-list-view
          [listFormat]="listFormat$ | async"
          [placeHolderText]="'De toegepaste filter bevat geen resultaten'"
        >
          <campus-folder
            data-cy="learningArea"
            *ngFor="let learningAreaInfo of filteredSharedLearningAreaInfo"
            campusListItem
            [routerLink]="[learningAreaInfo.learningArea.id]"
            [itemCount]="
              learningAreaInfo.bookCount + learningAreaInfo.bundleCount
            "
            [title]="learningAreaInfo.learningArea.name"
            [backgroundColor]="learningAreaInfo.learningArea.color"
            [icon]="learningAreaInfo.learningArea.icon"
          >
            <campus-folder-details data-cy="learningArea-details">
              {{ learningAreaInfo.bundleCount }}
              {{ learningAreaInfo.bundleCount === 1 ? 'bundel' : 'bundels' }} |
              {{ learningAreaInfo.bookCount }}
              {{ learningAreaInfo.bookCount === 1 ? 'boek' : 'boeken' }}
            </campus-folder-details>
          </campus-folder>
        </campus-list-view>
      </div>
    </ng-container>
  </ng-container>
</div>
