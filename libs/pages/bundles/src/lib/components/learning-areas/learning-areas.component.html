<campus-page-bar>
  <campus-filter-text-input theme="dark"
                            (filterTextChange)="onChangeFilterInput($event)"
                            [filterText]="filterInput$|async"
                            class="pages__toolbar__filter"></campus-filter-text-input>
  <div class="divider"></div>
  <!-- links need to replaced by the button -->
  <a (click)="clickChangeListFormat(listFormat.GRID)">grid</a>
  <a (click)="clickChangeListFormat(listFormat.LINE)">line</a>
</campus-page-bar>
<div class="pages-bundles__container"
     *ngIf="sharedInfo$|async as sharedInfo">

  <campus-page-header [title]="'Mijn bundels'"
                      [subtitle]="'leergebieden'"
                      [iconClass]="'polpo-lesmateriaal'"></campus-page-header>

  <ng-template #noSharedInfo>Er zijn momenteel geen bundels voor jou klaargezet.</ng-template>
  <ng-container *ngIf="sharedInfo.learningAreas.length > 0; else noSharedInfo">
    <ng-container *ngIf="filteredSharedInfo$|async as filteredSharedInfo">
      <div class="pages-bundles__container__learning-areas-count">
        {{filteredSharedInfo.learningAreas.length}} van
        <u class="pages-bundles__container__learning-areas-count__total"
           (click)="resetFilterInput()">{{sharedInfo.learningAreas.length}}</u>
        weergegeven
      </div>
      <div class="pages-bundles__container__learning-areas">
        <campus-list-view [listFormat]="listFormat$|async"
                          [placeHolderText]="'De toegepaste filter bevat geen resultaten'">
          <campus-folder *ngFor="let learningAreaInfo of filteredSharedInfo.learningAreas"
                         campusListItem
                         [routerLink]="[learningAreaInfo.learningArea.id]"
                         [listFormat]="listFormat$|async"
                         [itemCount]="learningAreaInfo.bookCount + learningAreaInfo.bundleCount"
                         [title]="learningAreaInfo.learningArea.name"
                         [backgroundColor]="learningAreaInfo.learningArea.color"
                         [icon]="'learning-area:' + learningAreaInfo.learningArea.icon">
            <campus-folder-details>
              {{learningAreaInfo.bundleCount}} {{learningAreaInfo.bundleCount === 1 ? 'bundel' : 'bundels'}}
              | {{learningAreaInfo.bookCount}} {{learningAreaInfo.bookCount === 1 ? 'boek' : 'boeken'}}
            </campus-folder-details>
          </campus-folder>
        </campus-list-view>
      </div>
    </ng-container>
  </ng-container>
</div>