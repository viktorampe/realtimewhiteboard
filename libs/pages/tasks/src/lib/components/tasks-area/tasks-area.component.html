<campus-page-bar>
  <campus-filter-text-input theme="dark"
                            (filterTextChange)="onChangeFilterInput($event)"
                            class="pages__toolbar__filter"></campus-filter-text-input>
  <div class="divider"></div>
  <campus-button (click)="clickChangeListFormat('GRID')">grid</campus-button>
  <campus-button (click)="clickChangeListFormat('LINE')">line</campus-button>
</campus-page-bar>


<div class="pages-tasks__container"
     *ngIf="(learningAreas$|async).learningAreas as learningAreas">

  <campus-page-header [title]="'Mijn taken'"
                      [subtitle]="'leergebieden'"
                      [iconClass]="'tasks'"></campus-page-header>

  <ng-template #noLearningAreas>Er zijn momenteel geen taken voor jou klaargezet.</ng-template>

  <ng-container *ngIf="learningAreas.length > 0; else noLearningAreas">
    <ng-container *ngIf="(displayedLearningAreas$|async).learningAreas as displayedLearningAreas">
      <div class="pages-tasks__container__learning-areas-count">
        {{displayedLearningAreas.length}} van
        <u class="pages-tasks__container__learning-areas-count__total"
           (click)="resetFilterInput(); filterInput.value = ''">{{(learningAreas$|async)?.learningAreas.length}}</u>
        weergegeven
      </div>
      <div class="pages-tasks__container__learning-areas">
        <campus-list-view [listFormat]="listFormat$|async"
                          [placeHolderText]="'De toegepaste filter bevat geen resultaten'">
          <ng-container *ngIf="(displayedLearningAreas$|async)?.totalTasks as taskCounts">
            <!-- click event (or routerlink) needs to be added to the folder items-->
            <campus-folder *ngFor="let learningArea of displayedLearningAreas"
                           campusListItem
                           [routerLink]="learningArea.learningArea.id"
                           [listFormat]="listFormat$|async"
                           [itemCount]="learningArea.openTasks"
                           [title]="learningArea.learningArea.name"
                           [backgroundColor]="learningArea.learningArea.color"
                           [icon]="'learning-area:'+learningArea.learningArea.icon">
              <campus-folder-details>
                {{learningArea.openTasks}}
                {{'open ' + (learningArea.openTasks === 1 ? 'taak' : 'taken')}}<br>
                {{learningArea.closedTasks}}
                {{'gesloten ' + (learningArea.closedTasks === 1 ? 'taak' : 'taken')}}
              </campus-folder-details>
            </campus-folder>
          </ng-container>
        </campus-list-view>
      </div>
    </ng-container>
  </ng-container>
</div>
