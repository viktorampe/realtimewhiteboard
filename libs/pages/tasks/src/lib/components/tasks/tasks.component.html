<campus-page-bar>
  <campus-filter-text-input
    theme="dark"
    class="pages__toolbar__filter"
    [source]="taskInstances$ | async"
  ></campus-filter-text-input>

  <div class="divider"></div>
  <campus-button
    [iconClass]="'icon-timeline'"
    (click)="setListFormat(listFormat.LINE)"
  ></campus-button>
  <campus-button
    [iconClass]="'icon-checklist'"
    (click)="setListFormat(listFormat.GRID)"
  ></campus-button>
</campus-page-bar>

<campus-page-header
  [title]="(learningArea$ | async).name"
  [subtitle]="'Taken'"
  [iconClass]="(learningArea$ | async).icon"
>
</campus-page-header>

<ng-container
  *ngIf="(filterTextInput.result$ | async) as filteredTaskInstances"
>
  <div class="pages-tasks__container">
    <div class="pages-tasks__container__tasks-count">
      {{ filteredTaskInstances.instances.length }} van
      <u (click)="filterTextInput.clear()">{{
        (taskInstances$ | async)?.instances.length
      }}</u>
      weergegeven
    </div>

    <campus-list-view [listFormat]="listFormat$ | async" [placeHolderText]="''">
      <campus-folder
        *ngFor="let instance of filteredTaskInstances.instances"
        [routerLink]="[instance.taskInstance.id]"
        campusListItem
        progress="{{instance.taskInstance.getProgress()}}"
        [itemCount]="instance.taskEduContentsCount"
        [title]="instance.taskInstance.name"
        [backgroundColor]="(learningArea$ | async).color"
        [icon]="getIcon(instance.finished)"
      >
        <campus-folder-details>
          {{ instance.taskEduContentsCount + ' item(s)' }}<br />
          {{ instance.taskInstance.end | date: 'short' }}
        </campus-folder-details>
      </campus-folder>
    </campus-list-view>
  </div>
</ng-container>
