<cdk-tree [dataSource]="nestedDataSource"
          [treeControl]="nestedTreeControl"
          class="ui-tree-nav__root">
  <cdk-tree-node *cdkTreeNodeDef="let node"
                 cdkTreeNodeToggle>
    <li class="ui-tree-nav__node">
      <a [routerLink]="node.link"
         routerLinkActive="ui-tree-nav__node--active">
        <mat-icon *ngIf="node.icon"
                  [svgIcon]="node.icon"></mat-icon>
        {{node.title}}
      </a>
    </li>
  </cdk-tree-node>

  <cdk-nested-tree-node *cdkTreeNodeDef="let node; when: hasChildren">
    <li class="ui-tree-nav__node">
      <a [routerLink]="node.link"
         routerLinkActive="ui-tree-nav__node--active"
         cdkTreeNodeToggle>
        <mat-icon *ngIf="node.icon"
                  [svgIcon]="node.icon"></mat-icon>
        {{node.title}}
        <mat-icon *ngIf="hasChildren(0, node) && !nestedTreeControl.isExpanded(node)"
                  class="ui-tree-nav__node__arrow"
                  [svgIcon]="'toggle'"></mat-icon>
        <mat-icon *ngIf="hasChildren(0, node) && nestedTreeControl.isExpanded(node)"
                  class="ui-tree-nav__node__closed"
                  [svgIcon]="'toggle-closed'"></mat-icon>
      </a>
      <ul>
        <ng-container cdkTreeNodeOutlet></ng-container>
      </ul>
    </li>
  </cdk-nested-tree-node>
</cdk-tree>
