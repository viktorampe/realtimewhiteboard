<ng-container *ngIf="(chosenType$ | async) as slideType">
  <form [formGroup]="slideForm" class="timeline-slide-detail__form">
    <mat-vertical-stepper>
      <ng-template matStepperIcon="edit">
        <mat-icon [svgIcon]="'edit'"></mat-icon>
      </ng-template>

      <ng-template matStepperIcon="done">
        <mat-icon [svgIcon]="'close'"></mat-icon>
      </ng-template>
      <!-- GENERAL -->
      <mat-step formGroupName="general" label="Algemeen">
        <div class="timeline-slide-detail__form__section">
          <label>Welk type slide wil je maken?</label>
          <mat-radio-group class="radio-group" formControlName="type">
            <mat-radio-button
              class="radio-button"
              *ngFor="let type of slideTypes"
              [value]="type"
              >{{ type }}</mat-radio-button
            >
          </mat-radio-group>
        </div>
        <div
          *ngIf="slideType != 'era'"
          class="timeline-slide-detail__form__section"
        >
          <div class="mat-h3">Groep</div>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="group"
              placeholder="Tot welke groep behoort deze gebeurtenis?"
            />
          </mat-form-field>
        </div>

        <div
          *ngIf="slideType != 'era'"
          class="timeline-slide-detail__form__section"
        >
          <div class="mat-h3">Weergavedatum</div>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="display_date"
              placeholder="Weergavedatum"
            />
          </mat-form-field>
        </div>
        <div>
          <button mat-button matStepperNext>Volgende</button>
        </div>
      </mat-step>
      <!-- START_DATE -->
      <mat-step formGroupName="start_date" label="Startdatum">
        <div
          class="timeline-slide-detail__form__dateTimePicker timeline-slide-detail__form__section"
        >
          <div class="mat-h3">Startdatum</div>
          <mat-form-field>
            <input
              matInput
              [matDatepicker]="startDatePicker"
              placeholder="Kies een startdatum"
              formControlName="date"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="startDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #startDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <input
              matInput
              type="number"
              formControlName="hour"
              placeholder="Kies een startuur"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="number"
              formControlName="minute"
              placeholder="Kies een startminuut"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="displayDate"
              placeholder="Hoe moet de datum worden weergegeven?"
            />
          </mat-form-field>
        </div>
        <div>
          <button mat-button matStepperPrevious>Vorige</button>
          <button mat-button matStepperNext>Volgende</button>
        </div>
      </mat-step>
      <!-- END_DATE -->
      <mat-step formGroupName="end_date" label="Einddatum">
        <div
          class="timeline-slide-detail__form__dateTimePicker timeline-slide-detail__form__section"
        >
          <div class="mat-h3">Einddatum</div>
          <mat-form-field>
            <input
              matInput
              [matDatepicker]="endDatePicker"
              placeholder="Kies een einddatum"
              formControlName="date"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="endDatePicker"
            ></mat-datepicker-toggle>
            <mat-datepicker #endDatePicker></mat-datepicker>
          </mat-form-field>

          <mat-form-field>
            <input
              matInput
              type="number"
              formControlName="hour"
              placeholder="Kies een einduur"
          /></mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="number"
              formControlName="minute"
              placeholder="Kies een eindminuut"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="displayDate"
              placeholder="Hoe moet de datum worden weergegeven?"
            />
          </mat-form-field>
        </div>

        <div>
          <button mat-button matStepperPrevious>Vorige</button>
          <button mat-button matStepperNext>Volgende</button>
        </div>
      </mat-step>
      <!-- TEXT -->
      <mat-step formGroupName="text" label="Tekst">
        <div class="timeline-slide-detail__form__section">
          <div class="mat-h3">Tekst</div>

          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="headline"
              placeholder="Titel"
            />
          </mat-form-field>
          <mat-form-field *ngIf="slideType != 'era'">
            <input
              matInput
              type="string"
              formControlName="text"
              placeholder="Omschrijving"
            />
          </mat-form-field>
        </div>
        <div>
          <button mat-button matStepperPrevious>Vorige</button>
          <button mat-button matStepperNext>Volgende</button>
        </div>
      </mat-step>
      <!-- BACKGROUND -->
      <mat-step
        *ngIf="slideType != 'era'"
        formGroupName="background"
        label="Achtergrond"
      >
        <div class="timeline-slide-detail__form__section">
          <div class="mat-h3">Achtergrond</div>
          {{ getFormGroup('background').value | json }}

          <div class="timeline-slide-detail__form__file-upload">
            <button mat-button (click)="backgroundUrlInput.click()"
              >Upload een bestand ...</button
            >
            <input
              #backgroundUrlInput
              type="file"
              [style.display]="'none'"
              (change)="handleFileInput($event.target.files, 'background.url')"
            />

            <mat-form-field>
              <input
                matInput
                type="string"
                formControlName="url"
                placeholder="url"
              />
            </mat-form-field>
          </div>
          <div class="timeline-slide-detail__form__color-picker">
            <button mat-button (click)="backgroundColorInput.click()"
              >Kies een kleur</button
            >
            <input
              #backgroundColorInput
              type="color"
              [style.display]="'none'"
              (change)="handleColorPick($event.target.value)"
            />
            <mat-form-field>
              <input
                readonly="true"
                matInput
                type="string"
                formControlName="color"
                placeholder="Kleur"
              />
            </mat-form-field>
          </div>
        </div>

        <div>
          <button mat-button matStepperPrevious>Vorige</button>
          <button mat-button matStepperNext>Volgende</button>
        </div>
      </mat-step>
      <!-- MEDIA -->
      <mat-step *ngIf="slideType != 'era'" formGroupName="media" label="Media">
        <div class="timeline-slide-detail__form__section">
          <div class="mat-h3">Media</div>
          <div class="timeline-slide-detail__form__file-upload">
            <button mat-button (click)="mediaUrlInput.click()"
              >Upload een bestand ...</button
            >
            <input
              #mediaUrlInput
              type="file"
              [style.display]="'none'"
              (change)="handleFileInput($event.target.files, 'media.url')"
            />
            <mat-form-field>
              <input
                matInput
                type="string"
                formControlName="url"
                placeholder="Of plaats hier een link naar een bestand"
              />
            </mat-form-field>
          </div>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="caption"
              placeholder="Caption"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="credit"
              placeholder="Credit"
            />
          </mat-form-field>
          <div class="timeline-slide-detail__form__file-upload">
            <button mat-button (click)="mediaThumbnailUrlInput.click()"
              >Upload een bestand ...</button
            >
            <input
              #mediaThumbnailUrlInput
              type="file"
              [style.display]="'none'"
              (change)="handleFileInput($event.target.files, 'media.thumbnail')"
            />
            <mat-form-field>
              <input
                matInput
                type="string"
                formControlName="thumbnail"
                placeholder="Thumbnail"
              />
            </mat-form-field>
          </div>

          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="alt"
              placeholder="Alt"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="title"
              placeholder="Titel"
            />
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              type="string"
              formControlName="link"
              placeholder="Link"
            />
          </mat-form-field>
        </div>
        <div>
          <button mat-button matStepperPrevious>Vorige</button>
        </div>
      </mat-step>
    </mat-vertical-stepper>

    <button mat-button (click)="onSubmit()">Opslaan</button>
  </form>
</ng-container>
