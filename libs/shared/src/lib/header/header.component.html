<div class="shared-header">
  <div class="shared-header__app-bar">
    <campus-app-bar>
      <campus-breadcrumbs
        bar__left
        [breadCrumbs]="breadCrumbs$ | async"
        [baseIcon]="'home'"
        [seperator]="'breadcrumb-separator'"
      >
      </campus-breadcrumbs>
      <div
        class="shared-header__app-bar__alerts"
        bar__right
        *ngIf="enableAlerts && (alertsLoaded$ | async)"
      >
        <campus-button
          (click)="dropDownAlerts.toggle()"
          class="shared-header__app-bar__alerts__button"
        >
          <mat-icon
            [svgIcon]="'notifications'"
            [matBadge]="unreadAlertCount$ | async"
            [matBadgeHidden]="!((unreadAlertCount$ | async) > 0)"
            matBadgePosition="above before"
            matBadgeColor="accent"
          ></mat-icon>
        </campus-button>

        <campus-dropdown-menu
          #dropDownAlerts
          [showHeader]="true"
          [newItemCount]="unreadAlertCount$ | async"
          [headerIcon]="'notifications'"
          itemType="meldingen"
          linkText="Alle meldingen"
          linkUrl="/settings/alerts"
        >
          <ng-container *ngIf="(alertNotifications$ | async) as notifications">
            <campus-notification
              *ngFor="let notification of notifications"
              dropdown
              [icon]="notification.icon"
              [notificationText]="notification.titleText"
              [campusRouterLink]="notification.link"
              [notificationDate]="notification.notificationDate"
              [accented]="notification.accented"
            ></campus-notification>
          </ng-container>
        </campus-dropdown-menu>
      </div>

      <div class="shared-header__app-bar__profile-menu" bar__right>
        <ng-container *ngIf="(currentUser$ | async) as user">
          <campus-person-badge
            (click)="dropDownProfile.toggle()"
            [person]="user"
            [subText]="'&#x25BE;'"
            [showBorder]="false"
            size="small"
          ></campus-person-badge>
        </ng-container>
        <campus-dropdown-menu
          #dropDownProfile
          [showHeader]="false"
          [smallWidth]="true"
        >
          <campus-dropdown-menu-item
            *ngFor="let menuItem of (profileMenuItems$ | async)"
            [icon]="menuItem.icon"
            [description]="menuItem.description"
            [header]="menuItem.header"
            [image]="menuItem.image"
            [campusRouterLink]="menuItem.internalLink || menuItem.externalLink"
            [class.ui-dropdown-menu-item__divider]="menuItem.dividerBefore"
          ></campus-dropdown-menu-item>
        </campus-dropdown-menu>
      </div>
    </campus-app-bar>
  </div>
  <div class="shared-header__page-bar">
    <campus-button
      *ngIf="(backLink$ | async) as link; else: hamburgerMenu"
      [routerLink]="link"
      class="shared-header__page-bar__nav-button"
      [iconClass]="'arrow-back'"
    ></campus-button>
    <ng-template #hamburgerMenu>
      <campus-button
        (click)="onMenuClick()"
        class="shared-header__page-bar__nav-button"
        [iconClass]="'menu'"
      ></campus-button>
    </ng-template>
    <div id="page-bar-container"></div>
  </div>
</div>
