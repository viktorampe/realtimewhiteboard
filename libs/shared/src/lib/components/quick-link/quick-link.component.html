<campus-info-panel
  [titleText]="dialogTitle"
  [titleIcon]="dialogTitleIcon"
  [displayAsRows]="false"
  class="quick-link__info-panel"
>
  <campus-filter-text-input
    class="quick-link__filter"
    title__right
    theme="dark"
    [source]="quickLinkCategories$ | async"
  ></campus-filter-text-input>
  <campus-banner
    class="ui-banner--dialog"
    *ngIf="(feedback$ | async) as feedback"
    [id]="feedback.id"
    [message]="feedback.message"
    [icon]="feedback.icon"
    [actions]="feedback.userActions"
    (afterDismiss)="onBannerDismiss($event)"
  ></campus-banner>
  <mat-dialog-content>
    <mat-action-list *ngIf="(filterTextInput.result$ | async) as categories">
      <ng-container *ngIf="categories.length; else: noContentTemplate">
        <ng-container
          *ngIf="categories[0].quickLinks.length; else: noResultsTemplate"
        >
          <ng-container *ngFor="let category of categories">
            <h3 mat-subheader>{{ category.title }}</h3>
            <mat-list-item
              class="quick-link__item"
              *ngFor="let quickLink of category.quickLinks"
              (click)="quickLink.defaultonActionClick(action, quickLink)"
            >
              <campus-file-extension
                *ngIf="quickLink.type === 'educontent'; else: notEduContent"
                [showIcon]="false"
                [extensionClass]="quickLink.eduContent.fileExtension"
                class="quick-link__item__file-extension"
              ></campus-file-extension>

              <ng-template #notEduContent>
                <mat-icon
                  mat-list-icon
                  [svgIcon]="quickLink.learningArea.icon"
                  class="quick-link__item__icon"
                ></mat-icon>
              </ng-template>
              <div
                class="quick-link__item__title"
                [matTooltip]="quickLink.defaultAction.tooltip"
                ><campus-content-editable
                  [relatedItem]="quickLink"
                  [text]="quickLink.name"
                  (textChanged)="update(quickLink, $event)"
                ></campus-content-editable
              ></div>
              <div
                class="quick-link__item__actions quick-link__item__actions--links quick-link__item__actions--hover"
              >
                <ng-container
                  *ngFor="let action of quickLink.alternativeOpenActions"
                >
                  <a
                    [matTooltip]="action.tooltip"
                    (click)="onActionClick(action, quickLink)"
                    campusClickStopPropagation
                    class="quick-link__item__actions__link"
                  >
                    {{ action.label }}</a
                  >
                  <span class="quick-link__item__actions__divider">|</span>
                </ng-container>
              </div>

              <div
                class="quick-link__item__actions quick-link__item__actions--hover"
              >
                <ng-container *ngFor="let action of quickLink.manageActions">
                  <campus-button
                    circle
                    [iconClass]="action.icon"
                    [matTooltip]="action.tooltip"
                    (click)="onActionClick(action, quickLink)"
                    campusClickStopPropagation
                  ></campus-button>
                </ng-container>
              </div>
              <div class="quick-link__item__actions__context-menu">
                <campus-button
                  circle
                  mat-icon-button
                  [matMenuTriggerFor]="allActionDropDown"
                  [iconClass]="'context_menu'"
                  campusClickStopPropagation
                >
                </campus-button>
                <mat-menu #allActionDropDown="matMenu">
                  <button
                    mat-menu-item
                    *ngFor="let action of quickLink.alternativeOpenActions"
                    (click)="onActionClick(action, quickLink)"
                  >
                    <mat-icon [svgIcon]="action.icon"></mat-icon
                    >{{ action.label }}</button
                  >
                  <button
                    mat-menu-item
                    *ngFor="let action of quickLink.manageActions"
                    (click)="onActionClick(action, quickLink)"
                  >
                    <mat-icon [svgIcon]="action.icon"></mat-icon
                    >{{ action.label }}</button
                  >
                </mat-menu>
              </div>
            </mat-list-item>
          </ng-container>
        </ng-container>
      </ng-container>
    </mat-action-list>
  </mat-dialog-content>
</campus-info-panel>
<mat-dialog-actions class="quick-link__dialog__actions">
  <campus-button
    primary
    class="quick-link__dialog__actions__button"
    (click)="closeDialog()"
    >Sluiten</campus-button
  >
</mat-dialog-actions>

<ng-template #noContentTemplate>
  <div class="quick-link__no-results">
    <span>Er zijn geen items om weer te geven.</span>
  </div>
</ng-template>

<ng-template #noResultsTemplate>
  <div class="quick-link__no-results">
    <span>Het filteren leverde geen resultaten op.</span>
    <a (click)="filterTextInput.clear()">Filter verwijderen</a>
  </div>
</ng-template>
